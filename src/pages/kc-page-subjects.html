<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/iron-list/iron-list.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../bower_components/paper-styles/shadow.html">

<link rel="import" href="../mtz-redux-store-mixin.html">

<dom-module id="kc-page-subjects">
  <template>
    <style>
      :host {
        display: flex;
      }
      .option-grid {
        height: 95vh;
        width: 95vw;
      }
      .container {
        margin: 5px;
      }
      paper-card {
        display: flex;
        padding: 0 5px 5px 5px;
        margin: 5px;
        width: 250px;
        min-height: 300px;
        /* TODO Set minimums for responsiveness */
      }
      paper-card:hover {
        @apply --shadow-elevation-12dp;
      }
    </style>

    <div class="option-grid">
      <iron-list
        items="[[subjects]]"
        as="subject"
        scroll-target="document"
        grid>
        <template>
          <div class="container" on-click="selectSubject">
            <paper-card
              heading="[[subject.label]]"
              image="[[subject.image]]"
              alt="[[subject.alt]]"
              data-subject="[[subject.name]]"
            ></paper-card>
          </div>
        </template>
      </iron-list>
    </div>

  </template>
  <script>
    class KcPageSubjects extends ReduxMixin(Polymer.Element) {
      static get is() { return 'kc-page-subjects'; }
      static get properties() {
        return {
          subjects: {
            type: Array,
            statePath: 'subjects'
          }
        };
      }
      connectedCallback() {
        super.connectedCallback();
      }
      selectSubject(e) {
        if (!e || !e.target || !e.target.dataSubject) return;
        this.dispatch({
          type: 'SELECT_SUBJECT',
          name: e.target.dataSubject
        });
      }
    }
    window.customElements.define(KcPageSubjects.is, KcPageSubjects);
  </script>
</dom-module>
